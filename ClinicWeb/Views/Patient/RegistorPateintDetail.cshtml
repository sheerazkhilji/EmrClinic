
@{
    ViewBag.Title = "RegistorPateintDetail";
}




<div class="container-fluid">
    <!-- ============================================================== -->
    <!-- Start Page Content -->
    <!-- ============================================================== -->



    <div class="row" >
        <div class="col-md-6">
            <h2>Pateint Appointments</h2>
        </div>
        <div class="col-md-6">

            <h2> Pateint Name :  <span class="PateintName"></span></h2>
        </div>

    </div>

    <div class="row">
        <!-- Column -->

        


        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table style="width:100%; line-height:90px; text-align:center;" id="producttable" class="table mb-4 mt-4 no-wrap table-hover contact-list table-responsive-md table-striped" data-page-size="10">
                            <thead>
                                <tr>

                                    <th>Doctor Name</th>
                                    <th>Date</th>

                                    <th>Amount</th>


                                    <th>Payment Type</th>

                                    <th>Details</th>

                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Column -->
    </div>
    <!-- ============================================================== -->
    <!-- End PAge Content -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Right sidebar -->
    <!-- ============================================================== -->
    <!-- .right-sidebar -->
    <!-- ============================================================== -->
    <!-- End Right sidebar -->
    <!-- ============================================================== -->
</div>



<script>



  var apiurl = "@System.Configuration.ConfigurationManager.AppSettings["url"]";

    function getQueryVariable(variable) {

        var query = window.location.search.substring(1);
        var vars = query.split("?");


        var a = vars.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) {
              return pair[1];
            }
        }
    }

    var patientid = "";
    var name = "";

    var fullname = "";
    var apId = "";
    $(document).ready(function () {
        var query = window.location.search.substring(1);
        var aa = query.split('&');



        var id = aa[0].split('=')
        apId = aa[1].split('=');

        patientid = id[1].replaceAll('%20', ' ')



        name = apId[1].replaceAll("%20", ' ');


     

        $(".PateintName").append(name);




        if (patientid != "undefined" && patientid != null) {

            $("#producttable").DataTable({
                "bServerSide": true, //make server side processing to true
                "sAjaxSource": apiurl + "api/getAppointmentbyPateintIDNew?PateintID=" + parseInt(patientid), //url of the Ajax source,i.e. web api method
                "sAjaxDataProp": "aaData", // data property of the returned ajax which contains table data
                "bProcessing": true,
                "bLengthChange": true,
                "sPaginationType": "full_numbers",//pagination type

                "aoColumns": [

                    { "mData": "doctorName" },

                    { "mData": "appoinement_date" },
                    { "mData": "amount" },
                    { "mData": "paymenttype" },
                    {


                        "mData": "appoientmentID", "bSearchable": false, "bSortable": false,


                        "mRender": function (data) {


                            var id = data;

                            return "<button type='button' class='btn btn-primary '   onclick='detials(" + JSON.stringify(id) + ")'>Details</button > ";




                        }

                    }






                ]
            });
        }







    });


    function detials(id) {

        window.location.href = "/Patient/PatientFollowupAnalysis?id=" + patientid + "&ApppointmentID=" + id + " ";


    }



</script>